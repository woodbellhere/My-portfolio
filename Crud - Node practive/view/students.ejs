<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ejs</title>
    <style>
      table{
        border-collapse: collapse;
      }
      tr,td {
        border: 1px #eee solid;
        font-size: 18px;
        padding: 24px;
      }

      caption {
        font-size: 24px;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <h2>current user: <%=username%></h2>
    <a href="/logout">logout</a>
    <hr>
    <% if(studentArr && studentArr.length > 0) { %>
    <table>
      <caption>students list</caption>
      <thead>
        <tr>
          <th>id</th>
          <th>name</th>
          <th>age</th>
          <th>gender</th>
          <th>address</th>
          <th>operations</th>
        </tr>
      </thead>

      <tbody>
        
          
        
       <% for(const stu of studentArr){ %>
        <tr>
          <td><%=stu.id%></td>
          <td><%=stu.name %></td>
          <td><%=stu.age %></td>
          <td><%=stu.gender %></td>
          <td><%=stu.address %></td>
          <td>
            <!-- 通过页面上加请求参数传id妙啊 -->
            <a 
              onclick="return confirm('are you sure?')"
              href="/student/delete?id=<%=stu.id%>"
               >delete</a>
            <a href="/student/to-update?id=<%=stu.id%>">modify</a>
          </td>
        </tr>
        <% }%>
      </tbody>
    </table>
    <%}else{%>
    <p>the list is empty</p>
    <%}%>

    <form action="/student/add" method="post">
      <div>name<input type="text" name="name" /></div>
      <div>age<input type="number" max="150" min="0" name="age" /></div>
      <div>
        gender<input type="radio" name="gender" value="male" /> 男
        <input type="radio" name="gender" value="female" /> 女
      </div>
      <div>address<input type="text" name="address" /></div>
      <div>
        <button>add</button>
      </div>
    </form>
    </form>
  </body>
</html>
